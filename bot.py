import json
import os
from aiogram import Bot, Dispatcher, executor, types

TOKEN = "8044456789:AAFovBE8r5_oKOX_llUhqM0sMRk83pnYi1k"

bot = Bot(token=TOKEN)
dp = Dispatcher(bot)

DATA_FILE = 'user_data.json'

earn_methods = [
    """**1. Продажа товаров на маркетплейсах: как выйти на прибыль**  
Маркетплейсы — это огромные площадки, где ты можешь продавать абсолютно любые товары: от одежды до гаджетов.  
Покупай товары оптом или производи сам, выставляй их на Wildberries, Ozon или Яндекс.Маркет.  
Главное — грамотно описывать товар, делать крутые фото и следить за отзывами.  
Так можно заработать стабильно без вложений в рекламу, если выберешь правильную нишу и работаешь с трендами.""",

    """**2. Фриланс: копирайтинг и дизайн для начинающих**  
У тебя есть грамотность или чувство стиля? Попробуй писать тексты для сайтов, соцсетей или создавать логотипы и баннеры.  
Площадки типа Kwork, Work-zilla и фриланс-биржи дают доступ к заказам с минимальным порогом входа.  
Заработок зависит от качества и скорости, но с опытом можно выйти на серьезные проекты с оплатой в тысячи рублей за задание.""",

    """**3. Партнёрские программы — зарабатывай на рекомендациях**  
Ты делишься ссылкой на сервисы, приложения или товары — получаешь процент с каждого привлеченного пользователя.  
Для максимальной прибыли создай Телеграм-канал или группу, где будешь делиться личным опытом и обзорами.  
Люди любят честные рекомендации — значит, доход будет стабильным.""",

    """**4. Создание курсов и вебинаров — делись знаниями и зарабатывай**  
Если у тебя есть уникальный опыт в любой сфере, создай свой курс.  
Запиши видеоуроки, подготовь чек-листы и продавай доступ через бота или сайт.  
Люди готовы платить за практические навыки, которые реально работают — сделай обучение живым и полезным.""",

    """**5. Инвестиции в акции и облигации — начни с минимальных сумм**  
Изучи основы фондового рынка, открой брокерский счет и начни с безопасных инструментов.  
С течением времени портфель будет расти, а ты научишься распознавать тренды.  
Важно — не гонись за быстрыми деньгами, а инвестируй регулярно и с умом.""",

    """**6. Блогинг и реклама — монетизируй свою аудиторию**  
Создай блог в Instagram, TikTok или YouTube и собирай аудиторию на интересной теме.  
Со временем подключай рекламу, делай партнерские интеграции и продавай собственные товары.  
Главное — регулярность и искренность, чтобы люди тебя полюбили.""",

    """**7. Торговля на бирже — от простого к сложному**  
Если интересуешься валютами, криптовалютой или акциями — начни с демо-счета.  
Изучи технический и фундаментальный анализ, выработай стратегию и постепенно переходи к реальным сделкам.  
Помни, что риски всегда есть — изучай, экспериментируй и не вкладывай больше, чем можешь позволить.""",

    """**8. Арбитраж трафика — заработок на рекламе без вложений**  
Создай Telegram-бот или канал с полезным контентом, набери аудиторию и перенаправляй её на партнерские предложения.  
Главное — грамотный подбор офферов и тестирование разных источников трафика.  
Если сделать все правильно, можно получать пассивный доход.""",

    """**9. Ведение соцсетей для бизнеса — помогай другим зарабатывать**  
Многие малые бизнесы не умеют вести соцсети. Предложи им услуги по созданию контента, настройке рекламы и общению с клиентами.  
Начинай с небольших заказов и растись до больших проектов с регулярным доходом.""",

    """**10. Программирование и разработка — тренд для тех, кто любит создавать**  
Учись создавать сайты, боты, мобильные приложения.  
Сначала можно брать простые заказы, а потом переходить к серьезным проектам.  
Кодинг — одна из самых высокооплачиваемых и востребованных профессий с возможностью работать удаленно.""",

    """**11. Создание YouTube канала — зарабатывай на просмотрах и рекламе**  
Снимай видео на тему, которая тебе интересна и близка.  
Секрет — регулярность, качество и взаимодействие с аудиторией.  
С ростом просмотров подключай монетизацию и партнерские программы.""",

    """**12. Продажа фото и видео — заработок на визуальном контенте**  
Если у тебя есть камера или хороший смартфон — снимай уникальные кадры и продавай их на фотобанках (Shutterstock, Adobe Stock).  
Можно также создавать видеоролики и анимации для бизнеса и соцсетей.""",

    """**13. Онлайн консультации — помогай людям с их задачами**  
Эксперт в своей сфере? Предлагай платные консультации через мессенджеры, Zoom или Telegram-бота.  
Сейчас востребованы консультации по финансам, психологии, маркетингу и IT.""",

    """**14. Разработка мобильных приложений — создавай полезные сервисы**  
Освой основы Android или iOS разработки.  
Начни с простых приложений, решающих бытовые задачи, и выкладывай их в магазины приложений.  
Можно заработать на рекламе внутри приложений или платных версиях.""",

    """**15. Заработок на нейросетях — новые возможности уже здесь!**  
Используй нейросети для создания уникального контента: тексты, иллюстрации, видео.  
Например, ChatGPT поможет быстро создавать продающие тексты, статьи и сценарии.  
Midjourney и Stable Diffusion — для генерации оригинальных изображений.  
Такой контент можно продавать или использовать для продвижения своих проектов.  
Потенциал огромный — будь впереди тренда!"""
]

def load_data():
    if os.path.exists(DATA_FILE):
        with open(DATA_FILE, 'r') as f:
            return json.load(f)
    else:
        return {}

def save_data(data):
    with open(DATA_FILE, 'w') as f:
        json.dump(data, f)

@dp.message_handler(commands=['start'])
async def start(message: types.Message):
    user_id = message.from_user.id

    data = load_data()
    users = data.get('users', [])
    if user_id not in users:
        users.append(user_id)
    data['users'] = users
    save_data(data)

    keyboard = types.InlineKeyboardMarkup()
    button = types.InlineKeyboardButton("Я готов, отправляй скорее!", callback_data="ready")
    keyboard.add(button)

    await message.answer(
        "Привет! Это *Схемка прилетела* — твой помощник по заработку.\n\n"
        "Ты готов? Нажми кнопку ниже, и я пришлю первые способы!",
        parse_mode='Markdown',
        reply_markup=keyboard
    )

def get_keyboard(page):
    keyboard = types.InlineKeyboardMarkup(row_width=3)

    nav_buttons = []
    if page > 0:
        nav_buttons.append(types.InlineKeyboardButton("⬅️ Назад", callback_data=f"page_{page-1}"))
    if page < len(earn_methods) - 1:
        nav_buttons.append(types.InlineKeyboardButton("Вперёд ➡️", callback_data=f"page_{page+1}"))

    if nav_buttons:
        keyboard.row(*nav_buttons)

    keyboard.add(types.InlineKeyboardButton("Я всё посмотрел", callback_data="all_done"))

    return keyboard

async def send_earn_method(chat_id, page):
    text = earn_methods[page]
    await bot.send_message(chat_id, text, parse_mode='Markdown', reply_markup=get_keyboard(page))

@dp.callback_query_handler(lambda c: c.data == "ready")
async def process_ready(callback_query: types.CallbackQuery):
    await bot.answer_callback_query(callback_query.id)
    await send_earn_method(callback_query.message.chat.id, 0)

@dp.callback_query_handler(lambda c: c.data and c.data.startswith('page_'))
async def process_page(callback_query: types.CallbackQuery):
    page = int(callback_query.data.split('_')[1])
    await bot.answer_callback_query(callback_query.id)
    await bot.edit_message_text(
        chat_id=callback_query.message.chat.id,
        message_id=callback_query.message.message_id,
        text=earn_methods[page],
        parse_mode='Markdown',
        reply_markup=get_keyboard(page)
    )

@dp.callback_query_handler(lambda c: c.data == 'all_done')
async def all_done(callback_query: types.CallbackQuery):
    await bot.answer_callback_query(callback_query.id)
    await bot.send_message(
        callback_query.message.chat.id,
        "Отлично! Каждый день будет новая порция способов заработка. Следи за обновлениями!"
    )

if __name__ == '__main__':
    executor.start_polling(dp, skip_updates=True)
